<div class="user-info <%= current_user == user ? "current-user" : "" %>">
  <%= image_tag user.icon_url,
                size: "32x32",
                class: "avatar",
                alt: "#{user.username}'s avatar" if user.icon_url %>
  <% if local_assigns.fetch(:show, []).include?(:slack) && user.slack_uid.present? %>
    <%= link_to "@#{user.username}", "https://slack.com/app_redirect?channel=#{user.slack_uid}", target: "_blank" %>
  <% else %>
    <%= user.username %>
  <% end %>
  <% if local_assigns.fetch(:show, []).include?(:neighborhood) && user.slack_uid.present? && neighborhood = SlackNeighborhood.find_by_id(user.slack_uid) %>
    <%= link_to "🏘️", "https://slack.com/app_redirect?channel=#{neighborhood.dig("id")}", target: "_blank" %>
  <% end %>
  <% unless current_user == user %>
    <% admin_tool('', 'span') do %>
      <%= link_to impersonate_user_path(user), class: "impersonate-link", data: { turbo_frame: "_top", turbo_prefetch: "false" } do %>
        🥸
      <% end %>
    <% end %>
  <% end %>
</div>